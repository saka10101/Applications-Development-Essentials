{"version":3,"sources":["summary/components/TopSummaries.js","summary/pages/UserSummary.js","summary/components/SummaryDetail.js"],"names":["TopSummaries","props","items","length","className","Card","Button","to","data","Array","from","map","summary","key","id","image","summary_cover","title","summary_title","description","book_description","body","summary_body","creatorId","creator_id","onDelete","onDeleteSummary","UserSummary","useState","LoadedSummaries","setLoadedSummaries","useHttpClient","isLoading","error","sendRequest","clearError","userId","useParams","useEffect","a","process","responseData","summarys","fetchSummary","Fragment","ErrorModal","onClear","LoadingSpinner","deletedSummaryId","prevSummary","filter","SummaryDetail","auth","useContext","AuthContext","showConfirmModal","setShowConfirmModal","cancelDeleteHandler","confirmDeleteHandler","Authorization","token","show","onCancel","header","footerClass","footer","inverse","onClick","danger","asOverlay","src","alt"],"mappings":"oNA0CeA,G,OAnCM,SAAAC,GAInB,GAA2B,IAAvBA,EAAMC,MAAMC,OACd,OACE,yBAAKC,UAAU,qBACb,kBAACC,EAAA,EAAD,KACE,mEACA,kBAACC,EAAA,EAAD,CAAQC,GAAG,gBAAX,oBAMR,IAAMC,EAAOC,MAAMC,KAAKT,EAAMC,OAE9B,OACE,wBAAIE,UAAU,cACXI,EAAKG,KAAI,SAAAC,GAAO,OACf,kBAAC,IAAD,CACEC,IAAKD,EAAQE,GACbA,GAAIF,EAAQE,GACZC,MAAOH,EAAQI,cACfC,MAAOL,EAAQM,cACfC,YAAaP,EAAQQ,iBACrBC,KAAMT,EAAQU,aACdC,UAAWX,EAAQY,WACnBC,SAAUxB,EAAMyB,wB,wBCaXC,UAxCK,WAAO,IAAD,EAEsBC,qBAFtB,mBAEjBC,EAFiB,KAEAC,EAFA,OAG8BC,cAA9CC,EAHgB,EAGhBA,UAAWC,EAHK,EAGLA,MAAOC,EAHF,EAGEA,YAAaC,EAHf,EAGeA,WAEjCC,EAASC,cAAYD,OAE3BE,qBAAU,YACU,uCAAG,4BAAAC,EAAA,+EAEUL,EACzBM,kCAAA,2BAAsDJ,IAHvC,OAEXK,EAFW,OAKjBX,EAAmBW,EAAaC,UALf,uGAAH,qDAQlBC,KACC,CAACT,EAAaE,IAQjB,OACE,kBAAC,IAAMQ,SAAP,KACE,kBAACC,EAAA,EAAD,CAAYZ,MAAOA,EAAOa,QAASX,IAClCH,GACC,yBAAK5B,UAAU,UACb,kBAAC2C,EAAA,EAAD,QAGFf,GAAaH,GACb,kBAAC,EAAD,CAAc3B,MAAO2B,EAAiBH,gBAfd,SAAAsB,GAC5BlB,GAAmB,SAAAmB,GAAW,OAC5BA,EAAYC,QAAO,SAAAtC,GAAO,OAAIA,EAAQE,KAAOkC,c,gJCqEpCG,IAvFO,SAAAlD,GAAU,IAAD,EACyB8B,cAA9CC,EADqB,EACrBA,UAAkBE,GADG,EACVD,MADU,EACHC,aACpBkB,GAFuB,EACUjB,WAC1BkB,qBAAWC,MAFK,EAImB1B,oBAAS,GAJ5B,mBAItB2B,EAJsB,KAIJC,EAJI,KAYvBC,EAAsB,WAC1BD,GAAoB,IAGhBE,EAAoB,uCAAG,sBAAAnB,EAAA,6DAC3BiB,GAAoB,GADO,kBAGnBtB,EAAYM,kCAAA,sBACDvC,EAAMa,IACrB,SACA,KACA,CACE6C,cAAe,UAAYP,EAAKQ,QARX,OAWzB3D,EAAMwB,SAASxB,EAAMa,IAXI,uGAAH,qDAe1B,OACE,kBAAC,IAAM8B,SAAP,KAEE,kBAAC,IAAD,CACEiB,KAAMN,EACNO,SAAUL,EACVM,OAAO,gBACPC,YAAY,4BACZC,OACE,kBAAC,IAAMrB,SAAP,KACE,kBAAC,IAAD,CAAQsB,SAAO,EAACC,QAASV,GAAzB,UAGA,kBAAC,IAAD,CAAQW,QAAM,EAACD,QAAST,GAAxB,YAMJ,+HAKF,wBAAItD,UAAU,cACZ,kBAAC,IAAD,CAAMA,UAAU,uBACb4B,GAAa,kBAAC,IAAD,CAAgBqC,WAAS,IACvC,yBAAKjE,UAAU,qBACb,yBACEkE,IAAK9B,kCAAA,UAAqCvC,EAAMc,OAChDwD,IAAKtE,EAAMgB,SAGf,yBAAKb,UAAU,oBACb,4BAAKH,EAAMgB,OACX,4BAAKhB,EAAMoB,MACX,2BAAIpB,EAAMkB,cAEZ,yBAAKf,UAAU,uBAEZgD,EAAKhB,SAAWnC,EAAMsB,WACrB,kBAAC,IAAD,CAAQhB,GAAE,mBAAcN,EAAMa,KAA9B,QAGDsC,EAAKhB,SAAWnC,EAAMsB,WACrB,kBAAC,IAAD,CAAQ6C,QAAM,EAACD,QApEM,WAC/BX,GAAoB,KAmEV,gB","file":"static/js/4.7ac610d9.chunk.js","sourcesContent":["import React from 'react';\n\nimport Card from '../../shared/components/UIElements/Card';\nimport SummaryItem from './SummaryDetail';\nimport Button from '../../shared/components/FormElements/Button';\nimport './TopSummaries.css';\n\nconst TopSummaries = props => {\n\n  \n\n  if (props.items.length === 0) {\n    return (\n      <div className=\"place-list center\">\n        <Card>\n          <h2>No summary found. Maybe create one?</h2>\n          <Button to=\"/summary/new\">Create Summary</Button>\n        </Card>\n      </div>\n    );\n  }\n\n  const data = Array.from(props.items);\n\n  return (\n    <ul className=\"place-list\">\n      {data.map(summary => (\n        <SummaryItem\n          key={summary.id}\n          id={summary.id}\n          image={summary.summary_cover}\n          title={summary.summary_title}\n          description={summary.book_description}\n          body={summary.summary_body}\n          creatorId={summary.creator_id}\n          onDelete={props.onDeleteSummary}\n        />\n      ))}\n    </ul>\n  );\n};\n\nexport default TopSummaries ;\n","import React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport TopSummaries from '../components/TopSummaries';\nimport ErrorModal from '../../shared/components/UIElements/ErrorModal';\nimport LoadingSpinner from '../../shared/components/UIElements/LoadingSpinner';\nimport { useHttpClient } from '../../shared/hooks/http-hook';\n\nconst UserSummary = () => {\n\n  const [LoadedSummaries, setLoadedSummaries] = useState();\n  const { isLoading, error, sendRequest, clearError } = useHttpClient();\n\n  const userId = useParams().userId;\n\n  useEffect(() => {\n    const fetchSummary = async () => {\n      try {\n        const responseData = await sendRequest(\n          process.env.REACT_APP_BACKEND_URL+`api/summary/user/${userId}`\n        );\n        setLoadedSummaries(responseData.summarys);\n      } catch (err) {}\n    };\n    fetchSummary();\n  }, [sendRequest, userId]);\n\n  const summaryDeletedHandler = deletedSummaryId => {\n    setLoadedSummaries(prevSummary =>\n      prevSummary.filter(summary => summary.id !== deletedSummaryId)\n    );\n  };\n\n  return (\n    <React.Fragment>\n      <ErrorModal error={error} onClear={clearError} />\n      {isLoading && (\n        <div className=\"center\">\n          <LoadingSpinner />\n        </div>\n      )}\n      {!isLoading && LoadedSummaries && (\n        <TopSummaries items={LoadedSummaries} onDeleteSummary={summaryDeletedHandler} />\n      )}\n    </React.Fragment>\n  );\n};\n\nexport default UserSummary;\n","import React, { useState, useContext } from 'react';\n\nimport Card from '../../shared/components/UIElements/Card';\nimport Button from '../../shared/components/FormElements/Button';\nimport Modal from '../../shared/components/UIElements/Modal';\nimport ErrorModal from '../../shared/components/UIElements/ErrorModal';\nimport LoadingSpinner from '../../shared/components/UIElements/LoadingSpinner';\nimport { AuthContext } from '../../shared/context/auth-context';\nimport { useHttpClient } from '../../shared/hooks/http-hook';\nimport './SummaryDetail.css';\n\nconst SummaryDetail = props => {\n  const { isLoading, error, sendRequest, clearError } = useHttpClient();\n  const auth = useContext(AuthContext);\n  \n  const [showConfirmModal, setShowConfirmModal] = useState(false);\n\n\n\n  const showDeleteWarningHandler = () => {\n    setShowConfirmModal(true);\n  };\n\n  const cancelDeleteHandler = () => {\n    setShowConfirmModal(false);\n  };\n\n  const confirmDeleteHandler = async () => {\n    setShowConfirmModal(false);\n    try {\n      await sendRequest(process.env.REACT_APP_BACKEND_URL+\n        `api/summary/${props.id}`,\n        'DELETE',\n        null,\n        {\n          Authorization: 'Bearer ' + auth.token\n        }\n      );\n      props.onDelete(props.id);\n    } catch (err) {}\n  };\n\n  return (\n    <React.Fragment>\n      \n      <Modal\n        show={showConfirmModal}\n        onCancel={cancelDeleteHandler}\n        header=\"Are you sure?\"\n        footerClass=\"place-item__modal-actions\"\n        footer={\n          <React.Fragment>\n            <Button inverse onClick={cancelDeleteHandler}>\n              CANCEL\n            </Button>\n            <Button danger onClick={confirmDeleteHandler}>\n              DELETE\n            </Button>\n          </React.Fragment>\n        }\n      >\n        <p>\n          Do you want to proceed and delete this summary? Please note that it\n          can't be undone thereafter.\n        </p>\n      </Modal>\n      <li className=\"place-item\">\n        <Card className=\"place-item__content\">\n          {isLoading && <LoadingSpinner asOverlay />}\n          <div className=\"place-item__image\">\n            <img\n              src={process.env.REACT_APP_BACKEND_URL+`${props.image}`}\n              alt={props.title}\n            />\n          </div>\n          <div className=\"place-item__info\">\n            <h2>{props.title}</h2>\n            <h3>{props.body}</h3>\n            <p>{props.description}</p>\n          </div>\n          <div className=\"place-item__actions\">\n            \n            {auth.userId === props.creatorId && (\n              <Button to={`/summary/${props.id}`}>EDIT</Button>\n            )}\n\n            {auth.userId === props.creatorId && (\n              <Button danger onClick={showDeleteWarningHandler}>\n                DELETE\n              </Button>\n            )}\n          </div>\n        </Card>\n      </li>\n    </React.Fragment>\n  );\n};\n\nexport default SummaryDetail;\n"],"sourceRoot":""}